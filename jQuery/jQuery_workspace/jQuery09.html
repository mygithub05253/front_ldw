<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>fetch</title>
</head>
<body>
  <!-- <button>버튼</button>
  <div class="emailList"></div> -->

  <!-- solution -->
  <ul class="email-list"></ul>
  <button>토글 버튼</button>
  
</body>
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.7.1/jquery.min.js"></script>
<script>
  // fetch로 요청 후 email만 가져와서 li 태그로 구성
  // javascript fetch api 함수로 구현하여 만들기
  // button을 누르면 위 아래로 slide 되는 toggle 만들기

  // const $button = $("button");
  const $emailList = $(".emailList");

  const $ul = $(".email-list");
  const $button = $("button");

  /* const fetchEmail = () => {
    fetch('https://jsonplaceholder.typicode.com/users')
    .then((response) => response.json())
    .then((data) => {
      for(let i = 0; i < data.length; i++) {
        $emailList.append(`<li>${data[i].email}</li>`);
      }
      $button.on("click", (e) => {
        $emailList.slideToggle();
      })
    })
    .catch(console.error)  
  }

  fetchEmail(); */

  // solution
  const getUsers = async () => {
    const response = await fetch("https://jsonplaceholder.typicode.com/users");
    const users = await response.json();
    return users;
  }

  getUsers()
    .then((users) => users.map((user) => user.email))
    .then((emails) => {
      emails.forEach((email) => {
        $ul.append(`<li>${email}</li>`);
      })
    })
    .catch(console.error)

  $button.on("click", (e) => {
    $ul.slideToggle();
  })  

</script>
</html>